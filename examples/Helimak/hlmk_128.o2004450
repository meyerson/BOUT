TACC: Setting memory limits for job 2004450 to unlimited KB
TACC: Dumping job script:
--------------------------------------------------------------------------------
#!/bin/bash

NO_ARGS=0 
OPTERROR=65

if [ $# -eq "$NO_ARGS" ]  # Script invoked with no command-line args?
then
    NP=128
    MPIEXEC="mpirun -np"

fi  
# Usage: scriptname -options
# Note: dash (-) necessary

while getopts ":n:np" Option
do
  case $Option in
    n ) MPIEXEC="mpirun -np";NP=$OPTARG;;
    * ) ;;   # DEFAULT
  esac
done

#-compile/build local executable
#make

#-run the case       
echo Running with NP = $NP       

rm -rf data*

llist=( -0.10 0.10 )

for lval in ${llist[@]}
do
  mkdir data_${lval}
  ln -s data_${lval} data
  sed "s/..\/Helimak\/Ln_lam\/Helimak_32x32_0.10_lam_n.nc/..\/Helimak\/Ln_lam\/Helimak_32x32_${lval}_lam_n.nc/g" BOUT.inp > data/BOUT.inp
  #if [ $zval -lt 128 ]
      #then
      # reduce time-step. At large times these cases produce noise
      #sed "s/TIMESTEP = 5e3/TIMESTEP = 1e3/g" data/BOUT.inp > data/tmp
      #mv -f data/tmp data/BOUT.inp
  #fi
      
  #$MPIEXEC $NP ./2fluid
  ibrun -n $NP -o 0  ./2fluid 
  wait
  rm -f data
done

#-check the result
#idl runidl.pro
--------------------------------------------------------------------------------
TACC: Done.
Running with NP = 128
TACC: Starting up job 2004450
TACC: Setting up parallel environment for OpenMPI mpirun.
TACC: Setup complete. Running job script.
TACC: starting parallel tasks...
Warning: Permanently added 'i182-204.ranger.tacc.utexas.edu' (RSA) to the list of known hosts.
Warning: Permanently added 'i182-109.ranger.tacc.utexas.edu' (RSA) to the list of known hosts.
Warning: Permanently added 'i182-105.ranger.tacc.utexas.edu' (RSA) to the list of known hosts.
Warning: Permanently added 'i115-210.ranger.tacc.utexas.edu' (RSA) to the list of known hosts.
Warning: Permanently added 'i182-205.ranger.tacc.utexas.edu' (RSA) to the list of known hosts.
Warning: Permanently added 'i182-209.ranger.tacc.utexas.edu' (RSA) to the list of known hosts.

BOUT++ version 0.80
MD5 checksum: 3171552fdd9bbc3012a16dfd51a41f2d
Code compiled on May 18 2011 at 00:02:00
B.Dudson (University of York), M.Umansky (LLNL) 2007
Based on BOUT by Xueqiao Xu, 1999

Compile-time options:
	Checking enabled, level 2
	Signal handling enabled
	PDB support disabled
	netCDF support enabled

Run started at  : Thu Jun 23 23:48:02 2011

Processor number: 0 of 128

Reading options file data/BOUT.inp
	Option NOUT = 2
	Option TIMESTEP = 1.000000e-02
	Option dump_float = true (default)
	Option ShiftXderivs = false
	Option IncIntShear = false (default)
	Option TwistShift = false
	Option ShiftOrder = 0 (default)
	Option TwistOrder = 0 (default)
	Option non_uniform = false (default)
	Option MZ = 33
	Option zperiod = 1 (default)
	Option ZMIN = 0.000000e+00
	Option ZMAX = 1.000000e+00
	Option MXG = 2
	Option MYG = 2
	Option BoundaryOnCell = false (default)
	Option StaggerGrids = false (default)
	Option NXPE = 8
Setting X differencing methods
	First       :  Second order central (C2)
	Second      :  Second order central (C2)
	Upwind      :  Third order WENO (W3)
Setting Y differencing methods
	First       :  Second order central (C2)
	Second      :  Second order central (C2)
	Upwind      :  Third order WENO (W3)
Setting Z differencing methods
	First       :  Fourth order central (C4)
	Second      :  Fourth order central (C4)
	Upwind      :  Third order WENO (W3)
Setting grid format
	Using NetCDF format for file 'Ln_lam/Helimak_32x32_0.10_lam_n.nc'
Loading topology
Failed to read grid. Aborting
--------------------------------------------------------------------------
mpirun has exited due to process rank 15 with PID 19820 on
node i115-110.ranger.tacc.utexas.edu exiting without calling "finalize". This may
have caused other processes in the application to be
terminated by signals sent by mpirun (as reported here).
--------------------------------------------------------------------------
TACC: MPI job exited with code: 1
TACC: Shutting down parallel environment.
TACC: Shutdown complete. Exiting.
TACC: Starting up job 2004450
TACC: Setting up parallel environment for OpenMPI mpirun.
TACC: Setup complete. Running job script.
TACC: starting parallel tasks...
[i115-110:19919] *** Process received signal ***
[i115-110:19919] Signal: Segmentation fault (11)
[i115-110:19919] Signal code: Address not mapped (1)
[i115-110:19919] Failing at address: 0x2aaa00000004

BOUT++ version 0.80
[i115-110:19919] [ 0] /lib64/tls/libpthread.so.0 [0x344230c4f0]
[i115-110:19919] [ 1] /opt/apps/gcc4_4/openmpi/1.3b/lib/openmpi/mca_btl_sm.so [0x2b9372f7a1ba]
[i115-110:19919] [ 2] /opt/apps/gcc4_4/openmpi/1.3b/lib/openmpi/mca_bml_r2.so [0x2b9372830f72]
[i115-110:19919] [ 3] /opt/apps/gcc4_4/openmpi/1.3b/lib/libopen-pal.so.0(opal_progress+0x4a) [0x2b936f622b8a]
[i115-110:19919] [ 4] /opt/apps/gcc4_4/openmpi/1.3b/lib/openmpi/mca_grpcomm_basic.so [0x2b93709c2a85]
[i115-110:19919] [ 5] /opt/apps/gcc4_4/openmpi/1.3b/lib/libmpi.so.0 [0x2b936f164d2c]
[i115-110:19919] [ 6] /opt/apps/gcc4_4/openmpi/1.3b/lib/libmpi.so.0(MPI_Init+0x138) [0x2b936f183978]
[i115-110:19919] [ 7] /work/01523/meyerson/Helimak3/2fluid(main+0x102) [0x496617]
[i115-110:19919] [ 8] /lib64/tls/libc.so.6(__libc_start_main+0xdb) [0x344141c3fb]
[i115-110:19919] [ 9] /work/01523/meyerson/Helimak3/2fluid(_ZNSt8ios_base4InitD1Ev+0x4a) [0x4408fa]
[i115-110:19919] *** End of error message ***
--------------------------------------------------------------------------
mpirun has exited due to process rank 51 with PID 21196 on
node i182-105.ranger.tacc.utexas.edu exiting without calling "finalize". This may
have caused other processes in the application to be
terminated by signals sent by mpirun (as reported here).
--------------------------------------------------------------------------
TACC: MPI job exited with code: 1
TACC: Shutting down parallel environment.
TACC: Shutdown complete. Exiting.
TACC: Cleaning up after job: 2004450
TACC: Done.
