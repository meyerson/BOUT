TACC: Setting memory limits for job 2004510 to unlimited KB
TACC: Dumping job script:
--------------------------------------------------------------------------------
#!/bin/bash

NO_ARGS=0 
OPTERROR=65

if [ $# -eq "$NO_ARGS" ]  # Script invoked with no command-line args?
then
    NP=128
    MPIEXEC="mpirun -np"

fi  
# Usage: scriptname -options
# Note: dash (-) necessary

while getopts ":n:np" Option
do
  case $Option in
    n ) MPIEXEC="mpirun -np";NP=$OPTARG;;
    * ) ;;   # DEFAULT
  esac
done

#-compile/build local executable
#make

#-run the case       
echo Running with NP = $NP       

rm -rf data*

llist=( -0.10 0.10 )

for lval in ${llist[@]}
do
  mkdir data_${lval}
  ln -s data_${lval} data
  sed "s/..\/Helimak\/Ln_lam\/Helimak_32x32_0.10_lam_n.nc/..\/Helimak\/Ln_lam\/Helimak_32x32_${lval}_lam_n.nc/g" BOUT.inp > data/BOUT.inp
  #if [ $zval -lt 128 ]
      #then
      # reduce time-step. At large times these cases produce noise
      #sed "s/TIMESTEP = 5e3/TIMESTEP = 1e3/g" data/BOUT.inp > data/tmp
      #mv -f data/tmp data/BOUT.inp
  #fi
      
  #$MPIEXEC $NP ./2fluid
  ibrun -n $NP -o 0  ./2fluid 
  wait
  rm -f data
done

#-check the result
#idl runidl.pro
--------------------------------------------------------------------------------
TACC: Done.
Running with NP = 128
TACC: Starting up job 2004510
TACC: Setting up parallel environment for OpenMPI mpirun.
TACC: Setup complete. Running job script.
TACC: starting parallel tasks...
Warning: Permanently added 'i182-201.ranger.tacc.utexas.edu' (RSA) to the list of known hosts.
Warning: Permanently added 'i115-412.ranger.tacc.utexas.edu' (RSA) to the list of known hosts.
Warning: Permanently added 'i182-309.ranger.tacc.utexas.edu' (RSA) to the list of known hosts.
Warning: Permanently added 'i115-109.ranger.tacc.utexas.edu' (RSA) to the list of known hosts.

BOUT++ version 0.80
MD5 checksum: 3171552fdd9bbc3012a16dfd51a41f2d
Code compiled on May 18 2011 at 00:02:00
B.Dudson (University of York), M.Umansky (LLNL) 2007
Based on BOUT by Xueqiao Xu, 1999

Compile-time options:
	Checking enabled, level 2
	Signal handling enabled
	PDB support disabled
	netCDF support enabled

Run started at  : Fri Jun 24 01:28:29 2011

Processor number: 0 of 128

Reading options file data/BOUT.inp
	Option NOUT = 20
	Option TIMESTEP = 3.000000e+01
	Option dump_float = true (default)
	Option ShiftXderivs = false
	Option IncIntShear = false (default)
	Option TwistShift = false
	Option ShiftOrder = 0 (default)
	Option TwistOrder = 0 (default)
	Option non_uniform = false (default)
	Option MZ = 33
	Option zperiod = 1 (default)
	Option ZMIN = 0.000000e+00
	Option ZMAX = 1.000000e+00
	Option MXG = 2
	Option MYG = 2
	Option BoundaryOnCell = false (default)
	Option StaggerGrids = false (default)
	Option NXPE = 8
Setting X differencing methods
	First       :  Second order central (C2)
	Second      :  Second order central (C2)
	Upwind      :  Third order WENO (W3)
Setting Y differencing methods
	First       :  Second order central (C2)
	Second      :  Second order central (C2)
	Upwind      :  Third order WENO (W3)
Setting Z differencing methods
	First       :  Fourth order central (C4)
	Second      :  Fourth order central (C4)
	Upwind      :  Third order WENO (W3)
Setting grid format
	Using NetCDF format for file '../Helimak/Ln_lam/Helimak_32x32_-0.10_lam_n.nc'
Loading topology
	Grid size: 36 by 32
	WARNING: Number of inner y points 'ny_inner' not found. Setting to 16
	EQUILIBRIUM IS SINGLE NULL (SND) 
	Option xperiodic = false (default)
Connection between top of Y processor 15 and bottom of 0 in range 0 <= x < 36
=> This processor sending in down
WARNING adding connection: poloidal index -1 out of range
	MYPE_IN_CORE = 1
	DXS = 8, DIN = 120. DOUT = -1
	UXS = 0, UIN = -1. UOUT = 8
	XIN = -1, XOUT = 1
	Twist-shift: DI 
	WARNING: Could not read 'g11' from grid. Setting to 1.000000e+00
	WARNING: Could not read 'g22' from grid. Setting to 1.000000e+00
	WARNING: Could not read 'g33' from grid. Setting to 1.000000e+00
	WARNING: Could not read 'g12' from grid. Setting to 0.000000e+00
	WARNING: Could not read 'g13' from grid. Setting to 0.000000e+00
	WARNING: Could not read 'g23' from grid. Setting to 0.000000e+00
	WARNING: Could not read 'zShift' from grid. Setting to 0.000000e+00
	WARNING: Z shift for radial derivatives not found
	WARNING: Twist-shift angle 'ShiftAngle' not found. Setting to zero
Calculating differential geometry terms
	Maximum error in diagonal inversion is 0.000000e+00
	Maximum error in off-diagonal inversion is 0.000000e+00
	WARNING: Could not read 'J' from grid. Setting to 0.000000e+00
	WARNING: Jacobian 'J' not found. Calculating from metric tensor
	Maximum difference in Bxy is 8.995012e-01
	Communicating connection terms
Initialising comms
	Option comms / async = false (default)
	Option comms / pre_post = false (default)
	done
Setting file formats
	Using NetCDF format for file 'data/BOUT.dmp.0.nc'
Initialising Laplacian inversion routines
	Option comms / async = true (default)
	Option laplace / filter = 2.000000e-01 (default)
	Option laplace / low_mem = false (default)
	Option laplace / use_pdd = false (default)
	Option laplace / all_terms = false (default)
	Option laplace / laplace_nonuniform = false (default)
	Using parallel Thomas algorithm
	Option laplace / max_mode = 13 (default)
Initialising physics module
Solving 6-variable 2-fluid equations
	WARNING: Could not read 'Ve0' from grid. Setting to 0.000000e+00
	WARNING: Could not read 'rho0' from grid. Setting to 0.000000e+00
	WARNING: Could not read 'Ajpar0' from grid. Setting to 0.000000e+00
	Reading contravariant vector bxcv
	Option 2fluid / AA = 3.600000e+01
	Option 2fluid / ZZ = 1.000000e+00
	Option 2fluid / estatic = true
	Option 2fluid / ZeroElMass = true
	Option 2fluid / zeff = 1.000000e+00 (default)
	Option 2fluid / nu_perp = 1.000000e-20
	Option 2fluid / ShearFactor = 0.000000e+00
	Option 2fluid / phi_flags = 0
	Option 2fluid / apar_flags = 0
	Option rho / evolve = true (default)
	Option Te / evolve = false
	Option Ni / evolve = true (default)
	Option Ajpar / evolve = false
	Option Vi / evolve = true (default)
	Option Ti / evolve = false
	Option V_drift / monitor = true (default)
    ****NOTE: input from BOUT, Z length needs to be divided by 1.652949e+01
	Normalising to rho_s = 1.925709e-02
rho inner x boundary: Zero gradient
rho outer x boundary: Zero gradient
rho lower y boundary: NONE
rho upper y boundary: NONE
Initial profile global options
	Option Ballooning = false (default)
	Option ShiftInitial = false (default)

rho
Ni inner x boundary: Zero gradient
Ni outer x boundary: Zero gradient
Ni lower y boundary: NONE
Ni upper y boundary: NONE
ni
Vi inner x boundary: Zero gradient
Vi outer x boundary: Zero gradient
Vi lower y boundary: NONE
Vi upper y boundary: NONE
vi
Initialising solver
Archiving restart files every 20 iterations
	Using NetCDF format for file 'nc'
Initialising PVODE solver
	Boundary region inner X
	3d fields = 3, 2d fields = 0 neq=110592, local_N=1152
	Option solver / mudq = 18 (default)
	Option solver / mldq = 18 (default)
	Option solver / mukeep = 0 (default)
	Option solver / mlkeep = 0 (default)
	Option solver / ATOL = 1.000000e-05
	Option solver / RTOL = 1.000000e-02
	Option solver / use_precon = false (default)
	Option solver / precon_dimens = 50 (default)
	Option solver / precon_tol = 1.000000e-04 (default)
	Option solver / pvode_mxstep = 15000
	Option fft / fft_measure = false (default)
Running simulation

	Option wall_limit = -1.000000e+00 (default)
Sim Time  |  RHS evals  | Wall Time |  Calc    Inv   Comm    I/O   SOLVER

3.000e+01        495        -     -    -    -    -    - 
|  Step 1 of 20. Elapsed 0:00:00.0 ETA 0:00:00.06.000e+01        465       5.21e+01    27.1    0.2    7.6    0.0   65.1
/  Step 2 of 20. Elapsed 0:00:52.1 ETA 0:15:38.19.000e+01        965       1.08e+02    27.1    0.2    7.6    0.0   65.1
-  Step 3 of 20. Elapsed 0:02:40.2 ETA 0:30:37.61.200e+02        199       2.23e+01    27.1    0.2    7.6    0.1   65.1
\  Step 4 of 20. Elapsed 0:03:02.5 ETA 0:05:56.71.500e+02         23       2.59e+00    27.0    0.2    7.7    0.7   64.5
|  Step 5 of 20. Elapsed 0:03:05.1 ETA 0:00:38.81.800e+02        177       1.99e+01    27.0    0.2    7.6    0.1   65.1
/  Step 6 of 20. Elapsed 0:03:24.9 ETA 0:04:37.92.100e+02       1029       1.15e+02    27.1    0.2    7.6    0.0   65.1
-  Step 7 of 20. Elapsed 0:05:20.2 ETA 0:24:58.22.400e+02       1559       1.75e+02    27.1    0.2    7.6    0.0   65.1
\  Step 8 of 20. Elapsed 0:08:14.7 ETA 0:34:54.32.700e+02       2578       2.89e+02    27.0    0.2    7.6    0.0   65.2
|  Step 9 of 20. Elapsed 0:13:03.7 ETA 0:52:58.83.000e+02       2379       2.66e+02    27.1    0.2    7.6    0.0   65.1
/  Step 10 of 20. Elapsed 0:17:30.0 ETA 0:44:23.03.300e+02       3045       3.41e+02    27.1    0.2    7.6    0.0   65.1
-  Step 11 of 20. Elapsed 0:23:11.0 ETA 0:51:09.03.600e+02       2493       2.79e+02    27.1    0.2    7.6    0.0   65.2
\  Step 12 of 20. Elapsed 0:27:50.4 ETA 0:37:15.53.900e+02       2271       2.54e+02    27.1    0.2    7.6    0.0   65.1
|  Step 13 of 20. Elapsed 0:32:04.8 ETA 0:29:40.64.200e+02       2912       3.26e+02    27.1    0.2    7.6    0.0   65.1
/  Step 14 of 20. Elapsed 0:37:30.9 ETA 0:32:36.54.500e+02       2569       2.88e+02    27.1    0.2    7.6    0.0   65.1
-  Step 15 of 20. Elapsed 0:42:18.5 ETA 0:23:58.04.800e+02       2534       2.84e+02    27.1    0.2    7.6    0.0   65.1
\  Step 16 of 20. Elapsed 0:47:02.0 ETA 0:18:54.15.100e+02       3158       3.54e+02    27.0    0.2    7.6    0.0   65.2
|  Step 17 of 20. Elapsed 0:52:56.1 ETA 0:17:42.25.400e+02       3106       3.48e+02    27.1    0.2    7.6    0.0   65.1
/  Step 18 of 20. Elapsed 0:58:43.9 ETA 0:11:35.65.700e+02       3283       3.68e+02    27.0    0.2    7.6    0.0   65.1
-  Step 19 of 20. Elapsed 1:04:51.8 ETA 0:06:07.96.000e+02       2233       2.51e+02    27.0    0.2    7.6    0.1   65.1
\  Step 20 of 20. Elapsed 1:09:02.6 ETA 0:00:00.0
Run finished at  : Fri Jun 24 02:38:31 2011

Run time : 1 h 10 m 2 s
TACC: Shutting down parallel environment.
TACC: Shutdown complete. Exiting.
TACC: Starting up job 2004510
TACC: Setting up parallel environment for OpenMPI mpirun.
TACC: Setup complete. Running job script.
TACC: starting parallel tasks...

BOUT++ version 0.80
MD5 checksum: 3171552fdd9bbc3012a16dfd51a41f2d
Code compiled on May 18 2011 at 00:02:00
B.Dudson (University of York), M.Umansky (LLNL) 2007
Based on BOUT by Xueqiao Xu, 1999

Compile-time options:
	Checking enabled, level 2
	Signal handling enabled
	PDB support disabled
	netCDF support enabled

Run started at  : Fri Jun 24 02:39:00 2011

Processor number: 0 of 128

Reading options file data/BOUT.inp
	Option NOUT = 20
	Option TIMESTEP = 3.000000e+01
	Option dump_float = true (default)
	Option ShiftXderivs = false
	Option IncIntShear = false (default)
	Option TwistShift = false
	Option ShiftOrder = 0 (default)
	Option TwistOrder = 0 (default)
	Option non_uniform = false (default)
	Option MZ = 33
	Option zperiod = 1 (default)
	Option ZMIN = 0.000000e+00
	Option ZMAX = 1.000000e+00
	Option MXG = 2
	Option MYG = 2
	Option BoundaryOnCell = false (default)
	Option StaggerGrids = false (default)
	Option NXPE = 8
Setting X differencing methods
	First       :  Second order central (C2)
	Second      :  Second order central (C2)
	Upwind      :  Third order WENO (W3)
Setting Y differencing methods
	First       :  Second order central (C2)
	Second      :  Second order central (C2)
	Upwind      :  Third order WENO (W3)
Setting Z differencing methods
	First       :  Fourth order central (C4)
	Second      :  Fourth order central (C4)
	Upwind      :  Third order WENO (W3)
Setting grid format
	Using NetCDF format for file '../Helimak/Ln_lam/Helimak_32x32_0.10_lam_n.nc'
Loading topology
	Grid size: 36 by 32
	WARNING: Number of inner y points 'ny_inner' not found. Setting to 16
	EQUILIBRIUM IS SINGLE NULL (SND) 
	Option xperiodic = false (default)
Connection between top of Y processor 15 and bottom of 0 in range 0 <= x < 36
=> This processor sending in down
WARNING adding connection: poloidal index -1 out of range
	MYPE_IN_CORE = 1
	DXS = 8, DIN = 120. DOUT = -1
	UXS = 0, UIN = -1. UOUT = 8
	XIN = -1, XOUT = 1
	Twist-shift: DI 
	WARNING: Could not read 'g11' from grid. Setting to 1.000000e+00
	WARNING: Could not read 'g22' from grid. Setting to 1.000000e+00
	WARNING: Could not read 'g33' from grid. Setting to 1.000000e+00
	WARNING: Could not read 'g12' from grid. Setting to 0.000000e+00
	WARNING: Could not read 'g13' from grid. Setting to 0.000000e+00
	WARNING: Could not read 'g23' from grid. Setting to 0.000000e+00
	WARNING: Could not read 'zShift' from grid. Setting to 0.000000e+00
	WARNING: Z shift for radial derivatives not found
	WARNING: Twist-shift angle 'ShiftAngle' not found. Setting to zero
Calculating differential geometry terms
	Maximum error in diagonal inversion is 0.000000e+00
	Maximum error in off-diagonal inversion is 0.000000e+00
	WARNING: Could not read 'J' from grid. Setting to 0.000000e+00
	WARNING: Jacobian 'J' not found. Calculating from metric tensor
	Maximum difference in Bxy is 8.995012e-01
	Communicating connection terms
Initialising comms
	Option comms / async = false (default)
	Option comms / pre_post = false (default)
	done
Setting file formats
	Using NetCDF format for file 'data/BOUT.dmp.0.nc'
Initialising Laplacian inversion routines
	Option comms / async = true (default)
	Option laplace / filter = 2.000000e-01 (default)
	Option laplace / low_mem = false (default)
	Option laplace / use_pdd = false (default)
	Option laplace / all_terms = false (default)
	Option laplace / laplace_nonuniform = false (default)
	Using parallel Thomas algorithm
	Option laplace / max_mode = 13 (default)
Initialising physics module
Solving 6-variable 2-fluid equations
	WARNING: Could not read 'Ve0' from grid. Setting to 0.000000e+00
	WARNING: Could not read 'rho0' from grid. Setting to 0.000000e+00
	WARNING: Could not read 'Ajpar0' from grid. Setting to 0.000000e+00
	Reading contravariant vector bxcv
	Option 2fluid / AA = 3.600000e+01
	Option 2fluid / ZZ = 1.000000e+00
	Option 2fluid / estatic = true
	Option 2fluid / ZeroElMass = true
	Option 2fluid / zeff = 1.000000e+00 (default)
	Option 2fluid / nu_perp = 1.000000e-20
	Option 2fluid / ShearFactor = 0.000000e+00
	Option 2fluid / phi_flags = 0
	Option 2fluid / apar_flags = 0
	Option rho / evolve = true (default)
	Option Te / evolve = false
	Option Ni / evolve = true (default)
	Option Ajpar / evolve = false
	Option Vi / evolve = true (default)
	Option Ti / evolve = false
	Option V_drift / monitor = true (default)
    ****NOTE: input from BOUT, Z length needs to be divided by 1.652949e+01
	Normalising to rho_s = 1.925709e-02
rho inner x boundary: Zero gradient
rho outer x boundary: Zero gradient
rho lower y boundary: NONE
rho upper y boundary: NONE
Initial profile global options
	Option Ballooning = false (default)
	Option ShiftInitial = false (default)

rho
Ni inner x boundary: Zero gradient
Ni outer x boundary: Zero gradient
Ni lower y boundary: NONE
Ni upper y boundary: NONE
ni
Vi inner x boundary: Zero gradient
Vi outer x boundary: Zero gradient
Vi lower y boundary: NONE
Vi upper y boundary: NONE
vi
Initialising solver
Archiving restart files every 20 iterations
	Using NetCDF format for file 'nc'
Initialising PVODE solver
	Boundary region inner X
	3d fields = 3, 2d fields = 0 neq=110592, local_N=1152
	Option solver / mudq = 18 (default)
	Option solver / mldq = 18 (default)
	Option solver / mukeep = 0 (default)
	Option solver / mlkeep = 0 (default)
	Option solver / ATOL = 1.000000e-05
	Option solver / RTOL = 1.000000e-02
	Option solver / use_precon = false (default)
	Option solver / precon_dimens = 50 (default)
	Option solver / precon_tol = 1.000000e-04 (default)
	Option solver / pvode_mxstep = 15000
	Option fft / fft_measure = false (default)
Running simulation

	Option wall_limit = -1.000000e+00 (default)
Sim Time  |  RHS evals  | Wall Time |  Calc    Inv   Comm    I/O   SOLVER

3.000e+01       1213        -     -    -    -    -    - 
|  Step 1 of 20. Elapsed 0:00:00.0 ETA 0:00:00.06.000e+01       2066       2.39e+02    24.4    0.2   11.0    0.0   64.4
/  Step 2 of 20. Elapsed 0:03:58.8 ETA 1:11:38.89.000e+01       1891       2.19e+02    24.4    0.2   11.0    0.0   64.4
-  Step 3 of 20. Elapsed 0:07:37.4 ETA 1:01:55.31.200e+02       2494       2.88e+02    24.4    0.2   11.0    0.0   64.5
\  Step 4 of 20. Elapsed 0:12:25.8 ETA 1:16:54.71.500e+02       1034       1.19e+02    24.4    0.2   11.0    0.0   64.5
|  Step 5 of 20. Elapsed 0:14:25.3 ETA 0:29:52.31.800e+02       2886       3.34e+02    24.4    0.2   11.0    0.0   64.5
/  Step 6 of 20. Elapsed 0:19:59.0 ETA 1:17:52.42.100e+02       2362       2.73e+02    24.4    0.2   11.0    0.0   64.4
-  Step 7 of 20. Elapsed 0:24:32.0 ETA 0:59:08.52.400e+02       2851       3.30e+02    24.4    0.2   11.0    0.0   64.5
\  Step 8 of 20. Elapsed 0:30:01.7 ETA 1:05:56.72.700e+02       5869       6.78e+02    24.4    0.2   11.0    0.0   64.4
|  Step 9 of 20. Elapsed 0:41:19.7 ETA 2:04:18.4mpirun: Forwarding signal 10 to job
TACC: Cleaning up after job: 2004510
TACC: Done.
